{% comment %}
  Main Page Section
  Displays the main content of static pages with enhanced typography
{% endcomment %}

{{ 'section-main-page.css' | asset_url | stylesheet_tag }}
<script src="{{ 'section-main-page.js' | asset_url }}" defer="defer"></script>

{%- liquid
  assign page_style = section.settings.page_style
  assign content_width = section.settings.content_width
  assign enable_animations = section.settings.enable_animations
  assign show_table_of_contents = section.settings.show_table_of_contents
-%}

<div class="main-page main-page--{{ page_style }}"
     data-main-page
     data-animations="{{ enable_animations }}">
  
  <div class="main-page__container {% if content_width == 'narrow' %}page-width--narrow{% elsif content_width == 'wide' %}page-width--wide{% else %}page-width{% endif %}">
    
    {%- if show_table_of_contents -%}
      <div class="main-page__sidebar">
        <div class="main-page__toc" data-table-of-contents>
          <h3 class="main-page__toc-title">{{ 'pages.general.table_of_contents' | t }}</h3>
          <nav class="main-page__toc-nav" id="table-of-contents">
            {%- comment -%} Table of contents will be generated by JavaScript {%- endcomment -%}
          </nav>
        </div>
      </div>
    {%- endif -%}
    
    <div class="main-page__content {% if show_table_of_contents %}main-page__content--with-sidebar{% endif %}">
      
      <div class="main-page__text rte" data-page-content>
        {{ page.content }}
      </div>
      
      {%- if section.settings.show_share_buttons -%}
        <div class="main-page__share">
          <h4 class="main-page__share-title">{{ 'pages.general.share_page' | t }}</h4>
          <div class="main-page__share-buttons">
            
            <a href="https://www.facebook.com/sharer.php?u={{ shop.url }}{{ page.url }}"
               class="main-page__share-button main-page__share-button--facebook"
               target="_blank"
               rel="noopener"
               aria-label="{{ 'pages.general.share_on' | t: platform: 'Facebook' }}">
              {%- render 'icon-facebook' -%}
              <span>Facebook</span>
            </a>
            
            <a href="https://twitter.com/intent/tweet?url={{ shop.url }}{{ page.url }}&text={{ page.title | url_encode }}"
               class="main-page__share-button main-page__share-button--twitter"
               target="_blank"
               rel="noopener"
               aria-label="{{ 'pages.general.share_on' | t: platform: 'Twitter' }}">
              {%- render 'icon-twitter' -%}
              <span>Twitter</span>
            </a>
            
            <a href="https://www.linkedin.com/sharing/share-offsite/?url={{ shop.url }}{{ page.url }}"
               class="main-page__share-button main-page__share-button--linkedin"
               target="_blank"
               rel="noopener"
               aria-label="{{ 'pages.general.share_on' | t: platform: 'LinkedIn' }}">
              {%- render 'icon-linkedin' -%}
              <span>LinkedIn</span>
            </a>
            
            <button class="main-page__share-button main-page__share-button--copy"
                    data-copy-url="{{ shop.url }}{{ page.url }}"
                    aria-label="{{ 'pages.general.copy_link' | t }}">
              {%- render 'icon-link' -%}
              <span>{{ 'pages.general.copy_link' | t }}</span>
            </button>
            
          </div>
        </div>
      {%- endif -%}
      
      {%- if section.settings.show_last_updated -%}
        <div class="main-page__meta">
          <p class="main-page__updated">
            <strong>{{ 'pages.general.last_updated' | t }}:</strong>
            <time datetime="{{ page.updated_at | date: '%Y-%m-%d' }}">
              {{ page.updated_at | date: format: 'month_day_year' }}
            </time>
          </p>
        </div>
      {%- endif -%}
      
    </div>
    
  </div>
  
  {%- comment -%} Decorative elements for Bubbly style {%- endcomment -%}
  {%- if page_style == 'bubbly' -%}
    <div class="main-page__decorative-elements" aria-hidden="true">
      <div class="main-page__bubble main-page__bubble--1"></div>
      <div class="main-page__bubble main-page__bubble--2"></div>
      <div class="main-page__bubble main-page__bubble--3"></div>
    </div>
  {%- endif -%}
  
</div>

{% schema %}
{
  "name": "Main Page",
  "class": "main-page-section",
  "settings": [
    {
      "type": "header",
      "content": "Layout Settings"
    },
    {
      "type": "select",
      "id": "page_style",
      "label": "Page style",
      "options": [
        {
          "value": "bubbly",
          "label": "Bubbly"
        },
        {
          "value": "minimal",
          "label": "Minimal"
        },
        {
          "value": "classic",
          "label": "Classic"
        }
      ],
      "default": "bubbly"
    },
    {
      "type": "select",
      "id": "content_width",
      "label": "Content width",
      "options": [
        {
          "value": "narrow",
          "label": "Narrow"
        },
        {
          "value": "standard",
          "label": "Standard"
        },
        {
          "value": "wide",
          "label": "Wide"
        }
      ],
      "default": "standard"
    },
    {
      "type": "header",
      "content": "Content Features"
    },
    {
      "type": "checkbox",
      "id": "show_table_of_contents",
      "label": "Show table of contents",
      "default": false,
      "info": "Automatically generates a table of contents from headings"
    },
    {
      "type": "checkbox",
      "id": "show_share_buttons",
      "label": "Show share buttons",
      "default": true
    },
    {
      "type": "checkbox",
      "id": "show_last_updated",
      "label": "Show last updated date",
      "default": false
    },
    {
      "type": "header",
      "content": "Typography"
    },
    {
      "type": "range",
      "id": "font_size_base",
      "label": "Base font size",
      "min": 14,
      "max": 20,
      "step": 1,
      "unit": "px",
      "default": 16
    },
    {
      "type": "range",
      "id": "line_height",
      "label": "Line height",
      "min": 1.2,
      "max": 2.0,
      "step": 0.1,
      "default": 1.6
    },
    {
      "type": "header",
      "content": "Performance"
    },
    {
      "type": "checkbox",
      "id": "enable_animations",
      "label": "Enable animations",
      "default": true
    },
    {
      "type": "checkbox",
      "id": "enable_lazy_loading",
      "label": "Enable lazy loading for images",
      "default": true
    }
  ],
  "presets": [
    {
      "name": "Main Page"
    }
  ]
}
{% endschema %} 